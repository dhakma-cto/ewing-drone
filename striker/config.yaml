camera:
  index: 0
  width: 1536
  height: 864
  # For lower-res higher-fps fallback:
  # width: 1280
  # height: 720

tracker:
  type: "CSRT"           # CSRT or KCF
  confidence_threshold: 0.5
  max_frames_lost: 15    # frames before triggering YOLO fallback
  # CSRT considers track lost if bbox area changes by this ratio
  area_change_ratio: 3.0
  aspect_change_ratio: 2.0

detector:
  hef_path: "/usr/share/hailo-models/yolov8s_h8.hef"
  confidence_threshold: 0.3
  input_width: 640
  input_height: 640
  nms_threshold: 0.45

recovery:
  max_centroid_distance: 200  # pixels - max distance to consider a match
  aspect_ratio_tolerance: 0.5 # ratio difference tolerance
  max_recovery_frames: 90     # give up after this many frames in TRACK_LOST

pid:
  x:
    kp: 0.5
    ki: 0.01
    kd: 0.1
  y:
    kp: 0.5
    ki: 0.01
    kd: 0.1
  z:
    kp: 0.3
    ki: 0.0
    kd: 0.05

servo:
  deadband: 0.02          # no command if error < 2% of frame
  max_velocity: 1.0       # m/s max horizontal velocity command
  descent_rate: -0.5      # m/s vertical velocity during terminal
  frame_center_x: 0.5     # normalized
  frame_center_y: 0.5

mavlink:
  port: "/dev/ttyACM0"
  baud: 115200
  system_id: 1
  component_id: 1

rc_input:
  port: "/dev/serial0"
  baud: 57600
  rate_hz: 10
  ch_move_x: 2        # right stick LR
  ch_move_y: 3        # right stick UD
  ch_size_w: 1        # left stick LR → width
  ch_size_h: 4        # left stick UD → height (throttle, absolute)
  ch_mode: 5          # AI/Manual mode switch
  ch_state: 7         # SG switch (right, top) — state transitions (edge-triggered)
  stick_deadband: 50
  cursor_speed: 8.0   # px/frame at full deflection
  size_speed: 3.0
  throttle_is_size_h: false
  invert_size_w: true
  default_roi_w: 120
  default_roi_h: 120
  min_roi_size: 15
  max_roi_size: 800
